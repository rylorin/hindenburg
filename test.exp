#!/usr/bin/expect
set PORT [lindex $argv 0]
spawn telnet localhost $PORT
expect "220"
send -- "HELO host.example.com\r"
expect "250"
send -- "MAIL FROM: <info@hindenburgresearch.com>\r"
expect "250 Accepted"
send -- "RCPT TO: <foo@bar.com>\r"
expect "250 Accepted"
send -- "DATA\r"
expect "354 End data with <CR><LF>.<CR><LF>"
send -- "From: =?utf-8?Q?Hindenburg=20Research?= <info@hindenburgresearch.com>\r"
send -- "Subject: =?utf-8?Q?Temenos=3A=20Major=20Accounting=20Irregularities=2C=20Failed=20Products=20And=20An=20Illusive=20Turnaround=20=28SWX=3ATEMN=29?=\r"
send -- "Content-Type: multipart/alternative; boundary=\"_----------=_MCPart_2068068051\"\r"
send -- "MIME-Version: 1.0\r"
send -- "\r"
send -- "This is a multi-part message in MIME format\r"
send -- "\r"
send -- "--_----------=_MCPart_2068068051\r"
send -- "Content-Type: text/plain; charset=\"utf-8\"; format=\"fixed\"\r"
send -- "Content-Transfer-Encoding: quoted-printable\r"
send -- "\r"
send -- "\r"
send -- "\r"
send -- "\r"
send -- "** Temenos: Major Accounting Irregularities=2C Failed Products And An Illu=\r"
send -- "sive Turnaround\r"
send -- "------------------------------------------------------------\r"
send -- "(SWX:TEMN)\r"
send -- "* Temenos AG is a ~\$7.5B market cap Swiss-listed banking software develope=\r"
send -- "r and services company that serves 3=2C000 customers globally and reported=\r"
send -- " \$1 billion in preliminary 2023 revenue.\r"
send -- "\r"
send -- "\n.\n"
expect "250 OK: message queued"
send -- "QUIT\n"
expect "221 Bye"
